# 1.4.你好，三角形

前面都是为OpenGL准备环境，到这里才开始真正接触OpenGL

## 基本概念

- 顶点缓冲对象：Vertex Buffer Object，VBO
- 顶点数组对象：Vertex Array Object，VAO
- 元素缓冲对象：Element Buffer Object，EBO 或 索引缓冲对象 Index Buffer Object，IBO

我对上面三个概念的理解

VAO和VBO是必须的，EBO不是必须的


VBO，定义了一块内存，这块内存中存储了一些**毫无关系**的浮点数，是单纯的一堆数据，没有赋予其任何含义

```cpp
float vertices[] = {
    -0.5f, -0.5f, 0.0f,
     0.5f, -0.5f, 0.0f,
     0.0f,  0.5f, 0.0f
};
```

VAO，里面定义了**如何解释VBO中数据**的一些属性，赋予VBO中浮点数的意义。
比如把`-0.5f, -0.5f, 0.0f`这样三个浮点数解释为一个`Vec3(x=-0.5,y=-0.5,z=0.9)`顶点。
上面的数组也就可以看作是：

```cpp
Vec3 vertices[] = {val1, val2, val3};
```

EBO，索引缓冲对象，主要处理顶点复用问题。

对于一个矩形，要是用两个三角形表示的话，需要6顶点，但是只需要4个顶点就行，尤其是数据量大的时候，顶点复用非常必要。

只需要准备4组点数据：

```cpp
float vertices[] = {
    0.5f, 0.5f, 0.0f,   // 右上角
    0.5f, -0.5f, 0.0f,  // 右下角
    -0.5f, -0.5f, 0.0f, // 左下角
    -0.5f, 0.5f, 0.0f   // 左上角
};
```

这4组点数据在经过VAO解释后，可以看作为：

```cpp
Vec3 vertices[] = {
    val1,// 右上角
    val2,// 右下角
    val3,// 左下角
    val4// 左上角
};
```

这样，就可以通过定义一组索引的方式，将这些点组织起来，解释为2个三角形

```cpp
unsigned int indices[] = {
    // 注意索引从0开始! 
    // 此例的索引(0,1,2,3)就是顶点数组vertices的下标，
    // 这样可以由下标代表顶点组合成矩形

    0, 1, 3, // 第一个三角形
    1, 2, 3  // 第二个三角形
};
```

VAO、VBO、EBO三种对象创建顺序应该是：

1. 先创建VAO
2. 创建VBO并添加数据
3. 设置顶点属性
4. 创建EBO并添加数据

## 着色器

着色器很复杂，OpenGL至少需要定义**顶点着色器**和**片段着色器**

简单理解：

顶点着色器：处理顶点数据
片段着色器：处理颜色

着色器在链接(Link)之后就可以删除

